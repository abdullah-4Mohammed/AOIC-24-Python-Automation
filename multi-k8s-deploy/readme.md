This python script is designed to automate the process of applying or deleting Kubernetes manifests. It's particularly useful when you have a large number of Kubernetes manifests spread across multiple directories and subdirectories.
This Python script is designed to automate the process of applying or deleting Kubernetes manifests in a structured project environment. It's particularly useful when you have a large number of Kubernetes manifests spread across multiple directories and subdirectories in a project structure. This comes in handy when you want to perform quick tests while maintaining a well-structured project and efficient pipelining.
The script works by walking through a specified directory and its subdirectories, looking for files with a .yaml extension. For each .yaml file it finds, it checks if the file is a valid Kubernetes manifest. A valid Kubernetes manifest is a YAML document that contains both 'apiVersion' and 'kind' fields.
If the script finds a valid Kubernetes manifest, it constructs a kubectl command to apply or delete the manifest, depending on the operation specified when running the script. The kubectl command is then executed.
If the kubectl command fails with a "NotFound" error (which can happen if you try to delete a resource that doesn't exist), the script handles this gracefully by printing a "Service not found" message and continuing with the next manifest. If the kubectl command fails with any other error, the script stops execution.
This script is a handy tool for DevOps engineers and anyone else who frequently works with Kubernetes, as it can save a lot of time and reduce the risk of errors when applying or deleting large numbers of Kubernetes manifests.
